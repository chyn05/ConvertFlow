const pdfjsLib=window['pdfjsLib'];pdfjsLib.GlobalWorkerOptions.workerSrc='https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';document.addEventListener('DOMContentLoaded',function(){const input=document.getElementById('pdfToJpgInput');const area=document.getElementById('jpgArea');const status=document.getElementById('jpgStatus');input&&input.addEventListener('change',async(e)=>{const file=e.target.files[0];if(!file) return;area.innerHTML='';status.textContent='Rendering...';const data=await file.arrayBuffer();const pdf=await pdfjsLib.getDocument({data}).promise;for(let i=1;i<=pdf.numPages;i++){const page=await pdf.getPage(i);const viewport=page.getViewport({scale:1});const scale=Math.min(400/viewport.width,600/viewport.height);const rv=page.getViewport({scale});const canvas=document.createElement('canvas');canvas.width=rv.width;canvas.height=rv.height;await page.render({canvasContext:canvas.getContext('2d'),viewport:rv}).promise;const a=document.createElement('a');canvas.toBlob(b=>{a.href=URL.createObjectURL(b);a.download='page-'+i+'.jpg';a.textContent='Download page-'+i+'.jpg';a.className='download-link';area.appendChild(canvas);area.appendChild(a);},'image/jpeg',0.9);}status.textContent='Done';});});