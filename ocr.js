document.addEventListener('DOMContentLoaded',function(){const input=document.getElementById('ocrInput');const btn=document.getElementById('ocrBtn');const status=document.getElementById('ocrStatus');const out=document.getElementById('ocrResult');btn&&btn.addEventListener('click',async()=>{if(!input.files[0]) return status.textContent='Select image or PDF';status.textContent='Running OCR... (this may take a while)';try{const f=input.files[0];if(f.type==='application/pdf'){status.textContent='PDF OCR not implemented fully; try extracting pages as images first.';return;}const dataUrl=await new Promise(r=>{const fr=new FileReader();fr.onload=e=>r(e.target.result);fr.readAsDataURL(f);});const { createWorker } = Tesseract;const worker = createWorker();await worker.load();await worker.loadLanguage('eng');await worker.initialize('eng');const { data } = await worker.recognize(dataUrl);out.textContent = data.text;await worker.terminate();status.textContent='Done';}catch(e){console.error(e);status.textContent='Error';}});});