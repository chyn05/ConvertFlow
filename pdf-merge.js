document.addEventListener('DOMContentLoaded', function(){const f=document.getElementById('pdfFiles');const btn=document.getElementById('mergeButton');const status=document.getElementById('status');const dl=document.getElementById('downloadLink');if(!btn) return;btn.addEventListener('click',async ()=>{status.textContent='';dl.style.display='none';if(!f.files||f.files.length<2){status.textContent='Select 2+ PDFs';return;}status.textContent='Merging...';try{const { PDFDocument }=PDFLib;const out=await PDFDocument.create();for(const file of f.files){const arr=await file.arrayBuffer();const pdf=await PDFDocument.load(arr);const pages=await out.copyPages(pdf,pdf.getPageIndices());pages.forEach(p=>out.addPage(p));}const bytes=await out.save();const blob=new Blob([bytes],{type:'application/pdf'});dl.href=URL.createObjectURL(blob);dl.style.display='inline-block';status.textContent='Done';}catch(e){console.error(e);status.textContent='Error';}});});