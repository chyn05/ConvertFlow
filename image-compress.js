document.addEventListener('DOMContentLoaded',function(){const input=document.getElementById('imageInput');const btn=document.getElementById('compressButton');const orig=document.getElementById('originalPreview');const comp=document.getElementById('compressedPreview');const dl=document.getElementById('downloadImageLink');const canvas=document.createElement('canvas');input&&input.addEventListener('change',e=>{const f=e.target.files[0];if(!f) return;const r=new FileReader();r.onload=ev=>orig.src=ev.target.result;r.readAsDataURL(f);});btn&&btn.addEventListener('click',()=>{if(!input.files[0]) return alert('Select image');const f=input.files[0];const r=new FileReader();r.onload=ev=>{const img=new Image();img.onload=()=>{canvas.width=img.width;canvas.height=img.height;const ctx=canvas.getContext('2d');ctx.drawImage(img,0,0);canvas.toBlob(b=>{comp.src=URL.createObjectURL(b);dl.href=URL.createObjectURL(b);dl.style.display='inline-block';},'image/jpeg',0.75);};img.src=ev.target.result;};r.readAsDataURL(f);});});