document.addEventListener('DOMContentLoaded',function(){const input=document.getElementById('pageNumbersInput');const btn=document.getElementById('addPageNumbersBtn');const dl=document.getElementById('pnDownload');const status=document.getElementById('pnStatus');btn&&btn.addEventListener('click',async()=>{if(!input.files[0]) return status.textContent='Select PDF';status.textContent='Adding numbers...';try{const { PDFDocument, rgb }=PDFLib;const arr=await input.files[0].arrayBuffer();const src=await PDFDocument.load(arr);const out=await PDFDocument.create();for(let i=0;i<src.getPageCount();i++){const [copied]=await out.copyPages(src,[i]);copied.drawText(String(i+1),{x:copied.getWidth()-50,y:30,size:12,color:rgb(0.2,0.2,0.2)});out.addPage(copied);}const bytes=await out.save();dl.href=URL.createObjectURL(new Blob([bytes],{type:'application/pdf'}));dl.style.display='inline-block';status.textContent='Done';}catch(e){console.error(e);status.textContent='Error';}});});